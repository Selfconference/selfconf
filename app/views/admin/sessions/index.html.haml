= render partial: "shared/header", event: @event

#admin-sessions

.mid_block
  .container
    .row
      .col-md-12
        - if @sessions.empty?
          No sessions!
        - else
          .pull-left
            %span.bold
              Total
            = ": #{@sessions.count}"
            %span.bold
              People
            = ": #{@sessions.where(talktype: 'people').count}"
            %span.bold
              Tech
            = ": #{@sessions.where(talktype: 'tech').count}"
          .pull-right
            %button.promote.button.purple-button Promote selected to sessions
          %table.datatable.table.table-striped.table-bordered{data: { pagelength: 35, sortcolumn: 1, sortorder: 'desc' }}
            %thead
              %tr
                %th= check_box_tag 'select-all', '0', false, class: 'select-all'
                %th.col-md-1 Votes
                %th.col-md-2 Name
                %th.col-md-2 Email
                %th.col-md-3 Talk Name
                %th Type
            %tbody
              - @sessions.each do |session|
                %tr
                  %td
                    = check_box_tag 'selected', '0', false, class: 'selected', data: { id: session.id } unless session.selected
                  %td
                    .center-wrapper
                      = session.votes.pluck(:value).reduce(:+)
                  %td= session.speakers.map(&:name).join(", ")
                  %td= session.speakers.map(&:email).join(", ")
                  %td= session.name
                  %td= session.talktype
